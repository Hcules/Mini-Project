#include <MQ2.h>
#include <WiFi.h>
#include "Adafruit_MQTT.h"
#include "Adafruit_MQTT_Client.h"

#define WIFI_SSID "OPPO F17 Pro"
#define WIFI_PASS "12345qwe"
#define AIO_USERNAME "Hercules_"
#define AIO_KEY "aio_rLZq55grqzyZpBorTIWM6u4bXm2G"

WiFiClient client;
Adafruit_MQTT_Client mqtt(&client, "io.adafruit.com", 1883, AIO_USERNAME, AIO_KEY);

Adafruit_MQTT_Publish gas = Adafruit_MQTT_Publish(&mqtt, AIO_USERNAME "/feeds/Chumma");

//use analog pin
int pin = 34;
float lpg, co, smoke;

MQ2 mq2(pin);

void setup()
{
  WiFi.begin(WIFI_SSID, WIFI_PASS);
  while (WiFi.status() != WL_CONNECTED) {
    Serial.println("Connecting to Wi-Fi...");
    delay(1000);
  }
  
  Serial.println("Connected to Wi-Fi");
  
  // Connect to Adafruit IO
  mqtt.connect();
  Serial.println("Connected to Adafruit IO");
  
  
  Serial.begin(9600);
  mq2.begin();

}

void loop()
{
  
  lpg = mq2.readLPG();
  co = mq2.readCO();
  smoke = mq2.readSmoke();

  gas.publish(co);
  
  delay(1000);
}
